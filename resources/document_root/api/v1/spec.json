{"components":{"responses":{"BadRequest":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400"},"Conflict":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409"},"Created":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/201"},"Forbidden":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403"},"GenerateLinkResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateLinkResponseSchema"}}},"description":"The generated short link"},"GetLinkResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GetLinkResponseSchema"}}},"description":"The short link record"},"InternalServerError":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500"},"NoContent":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/204"},"NotFound":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404"},"OK":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/200"},"PutLinkResponse":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PutLinkResponseSchema"}}},"description":"The short link record"},"Unauthorized":{"content":{},"description":"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401"}},"schemas":{"GenerateLinkRequestSchema":{"properties":{"lifetime_seconds":{"$ref":"#/components/schemas/LifetimeSeconds"},"target":{"$ref":"#/components/schemas/Url"}},"required":["url"],"type":"object"},"GenerateLinkResponseSchema":{"properties":{"available_until":{"$ref":"#/components/schemas/Timestamp"},"id":{"$ref":"#/components/schemas/Id"},"short_url":{"$ref":"#/components/schemas/Url"}},"required":["id","short_url"],"type":"object"},"GetLinkResponseSchema":{"properties":{"available_until":{"$ref":"#/components/schemas/Timestamp"},"created_at":{"$ref":"#/components/schemas/Timestamp"},"short_url":{"$ref":"#/components/schemas/Url"},"target":{"$ref":"#/components/schemas/Url"}},"required":["short_url","created_at"],"type":"object"},"Id":{"maxLength":255,"type":"string"},"LifetimeSeconds":{"description":"How long until a link is deleted. Explicitly setting this to 0 disables deletion.","minimum":0,"type":"integer"},"PutLinkRequestSchema":{"properties":{"lifetime_seconds":{"$ref":"#/components/schemas/LifetimeSeconds"},"target":{"$ref":"#/components/schemas/Url"}},"required":["url"],"type":"object"},"PutLinkResponseSchema":{"properties":{"available_until":{"$ref":"#/components/schemas/Timestamp"},"created_at":{"$ref":"#/components/schemas/Timestamp"},"short_url":{"$ref":"#/components/schemas/Url"},"target":{"$ref":"#/components/schemas/Url"}},"required":["short_url","target","created_at"],"type":"object"},"Timestamp":{"format":"%Y-%m-%dT%TZ","type":"string"},"Url":{"format":"url","pattern":"https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?\u0026//=]*)","type":"string"}},"securitySchemes":{"basicAuth":{"scheme":"basic","type":"http"},"bearerAuth":{"bearerFormat":"LoginToken","scheme":"bearer","type":"http"}}},"info":{"contact":{"email":"webmaster@wyoming.dev"},"description":"https://github.com/wyom1ng/horntail","title":"horntail","version":"1.0.0"},"openapi":"3.0.1","paths":{"/api/v1/link":{"post":{"operationId":"generateLink","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GenerateLinkRequestSchema"}}},"required":true},"responses":{"200":{"$ref":"#/components/responses/GenerateLinkResponse"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"bearerAuth":[]},{"basicAuth":[]}],"summary":"Generates a short link for a given target URL","tags":["link"]}},"/api/v1/link/{id}":{"delete":{"operationId":"removeLink","parameters":[{"in":"path","name":"id","required":true,"schema":{"maxLength":255,"minLength":3,"type":"string"}}],"responses":{"204":{"$ref":"#/components/responses/NoContent"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"bearerAuth":[]},{"basicAuth":[]}],"summary":"Delete a short link","tags":["link"]},"get":{"operationId":"getLink","parameters":[{"in":"path","name":"id","required":true,"schema":{"$ref":"#/components/schemas/Id"}}],"responses":{"200":{"$ref":"#/components/responses/GetLinkResponse"},"404":{"$ref":"#/components/responses/NotFound"},"409":{"$ref":"#/components/responses/Conflict"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"bearerAuth":[]},{"basicAuth":[]}],"summary":"Gets the record for a given short link","tags":["link"]},"put":{"operationId":"createLink","parameters":[{"in":"path","name":"id","required":true,"schema":{"$ref":"#/components/schemas/Id"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PutLinkRequestSchema"}}},"required":true},"responses":{"200":{"$ref":"#/components/responses/PutLinkResponse"},"201":{"$ref":"#/components/responses/Created"},"400":{"$ref":"#/components/responses/BadRequest"},"404":{"$ref":"#/components/responses/NotFound"},"409":{"$ref":"#/components/responses/Conflict"},"500":{"$ref":"#/components/responses/InternalServerError"}},"security":[{"bearerAuth":[]},{"basicAuth":[]}],"summary":"Create a short link with specific id","tags":["link"]}},"/api/v1/spec":{"get":{"operationId":"viewSpec","responses":{"200":{"content":{"text/html":{}},"description":"This page"},"500":{"$ref":"#/components/responses/InternalServerError"}},"summary":"Serve this page","tags":["meta"]}},"/api/v1/spec/{file_name}":{"get":{"operationId":"getSpecResource","parameters":[{"in":"path","name":"file_name","required":true,"schema":{"pattern":"^(?!\\w*\\.\\.)([^/]+)$","type":"string"}}],"responses":{"200":{"content":{"*/*":{"schema":{"format":"binary","type":"string"}}},"description":"The requested resource"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/InternalServerError"}},"summary":"OpenAPI related resources","tags":["meta"]}},"/{id}":{"get":{"operationId":"visitLink","parameters":[{"in":"path","name":"id","required":true,"schema":{"maxLength":255,"minLength":3,"type":"string"}}],"responses":{"302":{"content":{"text/html":{}},"description":"The long URL"},"404":{"$ref":"#/components/responses/NotFound"},"500":{"$ref":"#/components/responses/InternalServerError"}},"summary":"Either redirects to the stored URL (if one exists), or redirects to a predefined 404 page (if one exists) or returns a 404","tags":["public"]}}},"servers":[{"url":"http://localhost:9000/"},{"url":"https://wyoming.みんな/"}],"tags":[{"description":"the public API","name":"public"},{"description":"Link CRUD","name":"link"},{"description":"Everything about the specification itself","name":"meta"}]}
